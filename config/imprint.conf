CONFIG_ZMK_RGB_UNDERGLOW=y

# Disable BLE PHY 2Mbps for better compatibility with some Bluetooth controllers
CONFIG_BT_CTLR_PHY_2M=n

# Increase BT transmission power for more reliable connection
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Battery reporting
CONFIG_BT_BAS=y
CONFIG_ZMK_BATTERY_REPORTING=y

# Split keyboard battery reporting - report both halves
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y

# Connection stability improvements - balanced settings
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=20
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=30
CONFIG_BT_PERIPHERAL_PREF_LATENCY=20
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Split keyboard stability
CONFIG_ZMK_SPLIT_BLE_CENTRAL_SPLIT_RUN_STACK_SIZE=2048
CONFIG_ZMK_SPLIT_BLE_CENTRAL_SPLIT_RUN_QUEUE_SIZE=10

# Increase BLE buffers
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_L2CAP_TX_MTU=247

# Don't enforce subscriptions (helps with some hosts)
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n